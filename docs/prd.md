# 손가락 흔들기 대전 (Finger Wag Battle) - PRD

## 1. 개요
웹과 모바일 브라우저에서 모두 완벽하게 작동하는 '토게피 메트로놈 마스터' 게임. 사용자에게 마법 같은 스킬 애니메이션 경험을 제공하는 심플하지만 몰입감 있는 턴제 배틀 게임입니다.

## 2. 핵심 철학
-   **Simple**: 코드는 간결하고 직관적이어야 함.
-   **Magical & Dynamic**: 화려한 애니메이션과 사운드(추후)로 마법 같은 경험 제공.
-   **Fair & Random**: 확률 기반의 기술 발동으로 예측 불가능한 재미 추구.

## 3. 기술 스택 및 환경
-   **언어**: TypeScript (React/Next.js App Router).
-   **스타일링**: Tailwind CSS (반응형 디자인), Framer Motion (UI 애니메이션).
-   **애니메이션**: GSAP (전투/스킬 이펙트).
-   **데이터 저장**: LocalStorage (유저 진행 상황 영구 저장).
-   **자산**: 외부 이미지 파일 사용.

## 4. 게임 데이터 (Moves)
*확률(Weight)은 가중치로 작용하며, 전체 합산 대비 비율로 결정됨.*

| 기술명 | 타입 | 가중치(확률) | 효과 및 특징 |
| :--- | :--- | :--- | :--- |
| **몸통박치기** | 노말 | 40 | 기본 공격 (데미지 40) |
| **10만볼트** | 전기 | 30 | 강력한 공격 (데미지 70) |
| **파괴광선** | 노말 | 20 | 초강력 공격 (데미지 120, 다음 턴 반동으로 행동 불가) |
| **HP회복** | 노말 | 40 | 체력 회복 (+60) |
| **째려보기** | 노말 | 40 | 상대 방어력 감소 (-10, 누적 가능) |
| **튀어오르기** | 물 | 60 | 효과 없음 (데미지 0, **덱 필수 포함**) |
| **하이드로펌프** | 물 | 16 | 강력한 물 공격 (데미지 100) |
| **방어** | 노말 | 40 | 데미지 무효화 (연속 사용 시 실패, **강화 시 연속 성공 확률 증가**) |
| **맹독** | 독 | 20 | 맹독 상태 부여 (매 턴 종료 시 20 데미지), 보라색 해골 아이콘 |
| **섀도볼** | 고스트 | 40 | 데미지 70 (단, **토게피(노말)에게는 효과 없음/0**) |
| **리프레쉬** | 노말 | 20 | **상태 이상 치료** (**강화 시 추가 HP 회복**) |

## 5. 경제 및 상점 시스템 (Economy & Shop)
-   **재화 (Coin)**
    -   **초기 자본**: 300 코인
    -   **승리 보상**: 초급(50), 중급(100), 고급(150)
    -   **패배 보상**: 10 코인
-   **상점 (Shop)**
    -   **비용**: 1회 30 코인 / 10회 300 코인
    -   **중복**: 중복 획득 가능 (강화 재료로 사용)
    -   **확률표**: 실시간 단순 확률(%) 표기 (가중치 2배 적용됨)

## 6. 기술 강화 시스템 (Skill Upgrade)
-   **강화 조건**: 동일한 기술 **5개** 소모하여 레벨업 (최대 레벨 5).
-   **공통 효과 (공격기)**: 레벨당 데미지 **+10%** 증가 (v1: +10%, v5: +50%).
-   **특수 강화 효과**:
    -   **방어**: 레벨당 연속 사용 성공 확률 **+10%** (v5 시 50% 확률로 연속 방어 가능).
    -   **리프레쉬**: 레벨당 **+10 HP 회복** 추가 (v5 시 상태이상 해제 + 50 HP 회복).
    -   *플레이어만 적용되며, CPU는 기본 스펙(v0) 사용.*

## 7. 난이도 시스템 (Difficulty)
-   **초급 (Easy)**: HP 180 / 데미지 1.0배 / 보상 50코인 (기본 배경)
-   **중급 (Medium)**: HP 300 / 데미지 1.2배 / 보상 100코인 (노을 배경)
-   **고급 (Hard)**: HP 400 / 데미지 1.5배 / 보상 150코인 (밤 배경)

## 8. 게임 로직 (Game Flow)
1.  **LOBBY**: 난이도 선택, 상점/덱/강화/확률표 확인.
2.  **COIN_TOSS**: 선공 결정.
3.  **TURN**: 플레이어(선택) <-> CPU(랜덤) 교차 진행.
4.  **RESULT**: HP 0 도달 시 종료 및 보상 지급.

## 9. UI/UX 디테일
-   반응형 모바일 뷰 최적화.
-   전투 로그 타이핑 효과.
-   타격/회복 플로팅 텍스트 애니메이션.
-   강화/상점/덱 모달 인터페이스.